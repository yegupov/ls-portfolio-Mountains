(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{422:function(t,e,r){},437:function(t,e,r){"use strict";var i=r(422);r.n(i).a},453:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-container",attrs:{id:"work-form"}},[!1===t.editMode&&!0===t.visibleEditForm?r("div",{staticClass:"card-edit card"},[r("form",{staticClass:"edit-form"},[r("div",{staticClass:"card-edit__headline bottom-line"},[t._v("Создание работы")]),r("div",{staticClass:"card-edit__container"},[r("div",{staticClass:"card-edit__img-load card-edit__work"},[r("svg",{staticClass:"card-edit__work-border",attrs:{xmlns:"http://www.w3.org/2000/svg",viewbox:"0 0 300 200"}},[r("rect",{attrs:{id:"strokedrect",x:"0",y:"0",width:"100%",height:"100%"}})]),r("label",{staticClass:"card-edit__pic"},[r("p",[t._v("Перетащите или загрузите изображения")]),r("input",{staticClass:"card-edit__file-input",attrs:{type:"file"},on:{change:t.appendFileAndRenderPhoto}}),r("div",{staticClass:"btn btn-secondary"},[t._v("Загрузить")]),r("div",{staticClass:"card-edit__pic-container",class:{filled:t.renderedPhoto.length},style:{backgroundImage:"url("+t.renderedPhoto+")"}})])]),r("div",{staticClass:"card-edit__content card-edit__work-content"},[r("div",{staticClass:"edit-form__input-fields"},[r("div",{staticClass:"edit-form__group",class:{error:t.validation.firstError("work.title")}},[r("label",{staticClass:"edit-form__group-label"},[t._v("Название")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.work.title,expression:"work.title"}],staticClass:"edit-form__group-control",attrs:{type:"text",placeholder:"Дизайн сайта для авто-салона"},domProps:{value:t.work.title},on:{input:function(e){e.target.composing||t.$set(t.work,"title",e.target.value)}}}),r("div",{staticClass:"contact__group-error"},[r("error-tooltip",{attrs:{errorText:t.validation.firstError("work.title")}})],1)]),r("div",{staticClass:"edit-form__group",class:{error:t.validation.firstError("work.link")}},[r("label",{staticClass:"edit-form__group-label"},[t._v("Ссылка")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.work.link,expression:"work.link"}],staticClass:"edit-form__group-control",attrs:{type:"text",placeholder:"https://app.slack.com/"},domProps:{value:t.work.link},on:{input:function(e){e.target.composing||t.$set(t.work,"link",e.target.value)}}}),r("div",{staticClass:"contact__group-error"},[r("error-tooltip",{attrs:{errorText:t.validation.firstError("work.link")}})],1)])]),r("div",{staticClass:"edit-form__group",class:{error:t.validation.firstError("work.description")}},[r("label",{staticClass:"edit-form__group-label"},[t._v("Описание")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.work.description,expression:"work.description"}],staticClass:"edit-form__group-control contact__group-control_desc",attrs:{rows:"4",placeholder:"Порше Центр Москва - единственный дилер в России, принадлежащий Порше АГ, предоставляет полный набор услуг по продаже и сервисному обслуживанию автомобилей Porsche."},domProps:{value:t.work.description},on:{input:function(e){e.target.composing||t.$set(t.work,"description",e.target.value)}}}),r("div",{staticClass:"contact__group-error"},[r("error-tooltip",{attrs:{errorText:t.validation.firstError("work.description")}})],1)]),r("div",{staticClass:"edit-form__input-fields"},[r("div",{staticClass:"edit-form__group",class:{error:t.validation.firstError("work.techs")}},[r("label",{staticClass:"edit-form__group-label"},[t._v("Теги (введите через запятую)")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.work.techs,expression:"work.techs"}],staticClass:"edit-form__group-control",attrs:{type:"text",placeholder:"Jquery, Vue.js, HTML5"},domProps:{value:t.work.techs},on:{input:function(e){e.target.composing||t.$set(t.work,"techs",e.target.value)}}}),r("div",{staticClass:"contact__group-error"},[r("error-tooltip",{attrs:{errorText:t.validation.firstError("work.techs")}})],1)]),r("ul",{staticClass:"work__tags-list"},t._l(t.list,(function(e,i){return r("li",{key:i,staticClass:"work__tags-item",on:{click:function(r){return t.deleteTag(e)}}},[t._v(t._s(e))])})),0)]),r("div",{staticClass:"edit-form__btns"},[r("a",{staticClass:"form-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.hideWorkForm(e)}}},[t._v("Отмена")]),r("button",{staticClass:"btn btn-secondary",attrs:{type:"submit",disabled:t.disableSubmit},on:{click:t.addNewWork}},[t._v("Сохранить")])])])])])]):t._e(),!0===t.editMode&&!0===t.visibleEditForm?r("div",{staticClass:"card-edit card"},[r("form",{staticClass:"edit-form",on:{submit:t.editThisWork}},[r("div",{staticClass:"card-edit__headline bottom-line"},[t._v("Редактирование работы")]),r("div",{staticClass:"card-edit__container"},[r("div",{staticClass:"card-edit__img-load card-edit__work",style:{backgroundImage:"url(https://webdev-api.loftschool.com/"+t.editExistedWork.photo+")"}},[r("svg",{staticClass:"card-edit__work-border",attrs:{xmlns:"http://www.w3.org/2000/svg",viewbox:"0 0 300 200"}},[r("rect",{attrs:{id:"strokedrect",x:"0",y:"0",width:"100%",height:"100%"}})]),r("label",{staticClass:"card-edit__pic"},[r("input",{staticClass:"card-edit__file-input",attrs:{type:"file"},on:{change:t.appendFileAndRenderPhoto}}),r("div",{staticClass:"btn btn-secondary"},[t._v("Другое фото")]),r("div",{staticClass:"card-edit__pic-container",class:{filled:t.renderedPhoto.length},style:{backgroundImage:"url("+t.renderedPhoto+")"}})])]),r("div",{staticClass:"card-edit__content card-edit__work-content"},[r("div",{staticClass:"edit-form__input-fields"},[r("div",{staticClass:"edit-form__group"},[r("label",{staticClass:"edit-form__group-label"},[t._v("Название")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.editExistedWork.title,expression:"editExistedWork.title"}],staticClass:"edit-form__group-control",attrs:{type:"text",value:"editExistedWork.title"},domProps:{value:t.editExistedWork.title},on:{input:function(e){e.target.composing||t.$set(t.editExistedWork,"title",e.target.value)}}}),r("span",{staticClass:"edit-form__group-error"})]),r("div",{staticClass:"edit-form__group"},[r("label",{staticClass:"edit-form__group-label"},[t._v("Ссылка")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.editExistedWork.link,expression:"editExistedWork.link"}],staticClass:"edit-form__group-control",attrs:{type:"text",value:"editExistedWork.link"},domProps:{value:t.editExistedWork.link},on:{input:function(e){e.target.composing||t.$set(t.editExistedWork,"link",e.target.value)}}}),r("span",{staticClass:"edit-form__group-error"})])]),r("div",{staticClass:"edit-form__group"},[r("label",{staticClass:"edit-form__group-label"},[t._v("Описание")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editExistedWork.description,expression:"editExistedWork.description"}],staticClass:"edit-form__group-control contact__group-control_desc",attrs:{value:"editExistedWork.description",rows:"4"},domProps:{value:t.editExistedWork.description},on:{input:function(e){e.target.composing||t.$set(t.editExistedWork,"description",e.target.value)}}}),r("span",{staticClass:"edit-form__group-error"})]),r("div",{staticClass:"edit-form__input-fields"},[r("div",{staticClass:"edit-form__group"},[r("label",{staticClass:"edit-form__group-label"},[t._v("Теги (введите через запятую)")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.editExistedWork.techs,expression:"editExistedWork.techs"}],staticClass:"edit-form__group-control",attrs:{type:"text",value:"editExistedWork.techs"},domProps:{value:t.editExistedWork.techs},on:{input:function(e){e.target.composing||t.$set(t.editExistedWork,"techs",e.target.value)}}}),r("span",{staticClass:"edit-form__group-error"})]),r("ul",{staticClass:"work__tags-list"},t._l(t.list,(function(e,i){return r("li",{key:i,staticClass:"work__tags-item",on:{click:function(r){return t.deleteTag(e)}}},[t._v(t._s(e))])})),0)]),r("div",{staticClass:"edit-form__btns"},[r("a",{staticClass:"form-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.hideWorkForm(e)}}},[t._v("Отмена")]),r("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Сохранить")])])])])])]):t._e()])};i._withStripped=!0;var o=r(142),s=r(52);function a(t,e,r,i,o,s,a){try{var d=t[s](a),n=d.value}catch(t){return void r(t)}d.done?e(n):Promise.resolve(n).then(i,o)}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(r,!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c,u,p={mixins:[r(52).mixin],props:{editMode:Boolean,visibleEditForm:Boolean,editedWork:{type:Object,default:function(){return{}},required:!0},work:{type:Object,default:function(){return{}},required:!0}},data:function(){return{disableSubmit:!1,renderedPhoto:"",editExistedWork:{}}},components:{errorTooltip:function(){return r.e(0).then(r.bind(null,442))}},validators:{"work.title":function(t){return s.Validator.value(t).required("Введите название работы")},"work.link":function(t){return s.Validator.value(t).required("Введите ссылку")},"work.description":function(t){return s.Validator.value(t).required("Введите описание")},"work.techs":function(t){return s.Validator.value(t).required("Введите теги")}},computed:{list:function(){return this.editMode?this.editExistedWork.techs.trim().split(","):this.work.techs.trim().split(",")}},watch:{editedWork:function(){this.editExistedWork=n({},this.editedWork)}},methods:n({},Object(o.b)("works",["addWork","editWork"]),{},Object(o.c)("tooltip",["SHOW_TOOLTIP"]),{editThisWork:(c=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.editWork(this.editExistedWork);case 3:console.log("Работа, которую редактируем: ",this.editExistedWork),this.$emit("exitEditMode"),this.hideWorkForm(),document.body.scrollTop=document.documentElement.scrollTop=0,this.SHOW_TOOLTIP({type:"success",text:"Работа отредактирована!"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),this.SHOW_TOOLTIP({type:"error",text:t.t0.response.data.error});case 13:case"end":return t.stop()}}),t,this,[[0,10]])})),u=function(){var t=this,e=arguments;return new Promise((function(r,i){var o=c.apply(t,e);function s(t){a(o,r,i,s,d,"next",t)}function d(t){a(o,r,i,s,d,"throw",t)}s(void 0)}))},function(){return u.apply(this,arguments)}),addNewWork:function(){var t=this;this.$validate().then((function(e){if(!e)return t.disableSubmit=!0,void t.SHOW_TOOLTIP({type:"error",text:error.response.data.error});t.addWork(t.work),t.disableSubmit=!1,t.validation.reset(),t.hideWorkForm(),t.SHOW_TOOLTIP({type:"success",text:"Работа добавлена!"})}))},appendFileAndRenderPhoto:function(t){var e=this,r=t.target.files[0];this.editMode?this.editExistedWork.photo=r:this.work.photo=r;var i=new FileReader;try{i.readAsDataURL(r),i.onload=function(){e.renderedPhoto=i.result},this.SHOW_TOOLTIP({type:"success",text:"Фото загружено!"})}catch(t){this.SHOW_TOOLTIP({type:"error",text:t.response.data.error})}},deleteTag:function(t){var e;","===(e=(e=(e=(e=this.editMode?this.editExistedWork.techs:this.work.techs).replace(t,"")).replace(",,",",")).trim())[0]&&(e=e.slice(1)),","===e[e.length-1]&&(e=e.slice(0,-1)),e=e.trim(),this.editMode?this.editExistedWork.techs=e:this.work.techs=e},hideWorkForm:function(){this.disableSubmit=!1,this.validation.reset(),this.renderedPhoto="",this.$emit("hideWorkForm")}})},_=(r(437),r(97)),v=Object(_.a)(p,i,[],!1,null,"5f3700bf",null);v.options.__file="src/admin/components/works-form.vue";e.default=v.exports}}]);